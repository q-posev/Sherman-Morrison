
CXX = @CXX@
CXXFLAGS = @CXXFLAGS@
CPPFLAGS = @CPPFLAGS@
LIBS = @LIBS@
LDFLAGS = @LDFLAGS@

## Dependencies
DEPS_CXX = $(SRC_DIR)/SM_Maponi.o \
	   $(SRC_DIR)/SM_Standard.o \
	   $(SRC_DIR)/Woodbury.o \
	   $(SRC_DIR)/SMWB.o \
	   $(SRC_DIR)/Helpers.o

## Directory structure
SRC_DIR := src
TST_DIR := tests
INC_DIR := include
OBJ_DIR := build
BIN_DIR := bin

EXEC := $(BIN_DIR)/test_h5 

## Build tagets
.PHONY: all clean distclean

all: $(EXEC)

clean:
	@rm -vrf $(OBJ_DIR) $(SRC_DIR)/*.o $(TST_DIR)/*.o

#### COMPILING
$(BIN_DIR) $(OBJ_DIR):
	mkdir -p $@

.SUFFIXES: .cpp .o

#### LINKING
$(BIN_DIR)/test_h5: $(DEPS_CXX) $(TST_DIR)/test_h5.o | $(BIN_DIR)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $(TST_DIR)/test_h5.o $(DEPS_CXX) -o $(EXEC) $(LDFLAGS) $(LIBS)

